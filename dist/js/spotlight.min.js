/**
 * Spotlight.js v0.6.5
 * Copyright 2019 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';var aa={};function ba(a){for(var b=a.classList,c={},d=0;d<b.length;d++)c[b[d]]=1;a.a=c;a.c=b}function f(a,b){a=g(a);var c="string"===typeof b;if(a.length)for(var d=0;d<a.length;d++)(c?ca:da)(a[d],b);else(c?ca:da)(a,b)}function da(a,b){for(var c=0;c<b.length;c++)ca(a,b[c])}function ca(a,b){a.a||ba(a);a.a[b]||(a.a[b]=1,a.c.add(b))}function h(a,b){a=g(a);var c="string"===typeof b;if(a.length)for(var d=0;d<a.length;d++)(c?ea:fa)(a[d],b);else(c?ea:fa)(a,b)}
function fa(a,b){for(var c=0;c<b.length;c++)ea(a,b[c])}function ea(a,b){a.a||ba(a);a.a[b]&&(a.a[b]=0,a.c.remove(b))}function k(a,b,c,d){a=g(a);var e="string"!==typeof b&&Object.keys(b);if(a&&a.length)for(var l=0;l<a.length;l++)(e?ha:ia)(a[l],b,e||c,d);else(e?ha:ia)(a,b,e||c,d)}function ha(a,b,c,d){for(var e=0;e<c.length;e++){var l=c[e];ia(a,l,b[l],d)}}
function ia(a,b,c,d){var e=a.f;e||(a.f=e={});e[b]!==c&&(e[b]=c,(a.g||(a.g=a.style)).setProperty(aa[b]||(aa[b]=b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),c,d?"important":null))}var ja=0;function m(a,b,c){a&&(k(a,"transition","none"),k(a,b,c),ja||(ja=a.clientTop&&0),k(a,"transition",""))}function ka(a,b){b||(b="");a=g(a);if(a.length)for(var c=0;c<a.length;c++){var d=a[c],e=b;d.b!==e&&(d.b=e,d.textContent=e)}else a.b!==b&&(a.b=b,a.textContent=b)}
function g(a){return"string"===typeof a?document.querySelectorAll(a):a};function la(a,b,c,d){ma("add",a,b,c,d)}function na(a,b,c,d){ma("remove",a,b,c,d)}function ma(a,b,c,d,e){b[a+"EventListener"](c||"click",d,"undefined"===typeof e?!0:e)}function n(a,b){a||(a=window.event);a&&(a.stopImmediatePropagation(),b||a.preventDefault(),b||(a.returnValue=!1));return!1};var p="theme fullscreen autofit zoom-in zoom-out page title description player progress".split(" "),r,t,oa,pa,u,v,y,z,A,B,C,D,E,F,qa,ra,G,H,I,J,sa,ta,ua,K,L,N,va,O,wa,xa,ya,za,Ba,P,Ca,Da,Ea,Q,R,Fa,S,T,U,Ga;function V(a){return(O||document).getElementsByClassName(a)[0]}
function Ha(a,b){if(H=a.length){L||(L=(O||document).getElementsByClassName("pane"));var c=L.length,d=I.title,e=I.description;U=Array(H);for(var l=0;l<H;l++){var q=a[l],w=q.dataset;if(l>=c){var x=L[0].cloneNode(!1);k(x,"left",100*l+"%");L[0].parentNode.appendChild(x)}x=void 0;var M=U,jb=l,kb=q.querySelector(".cgallery-item__asset img")||q.querySelector(".cgallery-item__asset div"),lb=w&&(w.href||w.src)||q.src||q.href,Aa;(Aa=w&&w.title||q.title)||(Aa=(x=(q||document).getElementsByTagName("img")).length&&
x[0].alt);M[jb]={element:kb,src:lb,title:Aa||d||"",description:w&&w.description||q.description||e||""}}G=b||1;Ia(!0);Ja()}}function Ka(a,b,c,d){if(d||a[c])I[c]=b&&b[c]||d}
function La(a,b){I={};b&&Ma(b);Ma(a);Ka(a,b,"description");Ka(a,b,"title");Ka(a,b,"prefetch",!0);Ka(a,b,"preloader",!0);ta=a.onchange;J=I.infinite;J="undefined"!==typeof J&&"false"!==J;sa="false"!==I.progress;ua=1*I.player||7E3;if((a=I.zoom)||""===a)I["zoom-in"]=I["zoom-out"]=a,delete I.zoom;if((a=I.control)||""===a){a="string"===typeof a?a.split(","):a;for(b=0;b<p.length;b++)I[p[b]]="false";for(b=0;b<a.length;b++){var c=a[b].trim();"zoom"===c?I["zoom-in"]=I["zoom-out"]="true":I[c]="true"}}for(a=
0;a<p.length;a++)b=p[a],k(V(b),"display","false"===I[b]?"none":"");(ra=I.theme)?Na():ra="white"}function Ma(a){for(var b=I,c=Object.keys(a),d=0;d<c.length;d++){var e=c[d];b[e]=""+a[e]}}
function Oa(){var a=G;K=L[a-1];N=K.firstElementChild;G=a;if(!N){var b="false"!==I.preloader;console.log(U[a-1],U);var c=U[a-1];c.src.match(/https:\/\/www.youtube.com\/embed|https:\/\/player.vimeo.com\/video/)?K.appendChild(c.element.cloneNode(!0)):(N=new Image,N.onload=function(){b&&h(Q,"show");U&&(y=this.width,z=this.height,k(this,{visibility:"visible",opacity:1,transform:""}),"false"!==I.prefetch&&a<H&&((new Image).src=U[a].src))},N.onerror=function(){K.removeChild(this)},K.appendChild(N),N.src=
c.src);b&&f(Q,"show");return!b}return!0}la(document,"",Pa);la(document,"DOMContentLoaded",Qa,{once:!0});var Ra=!1;
function Qa(){Ra||(O=document.createElement("div"),O.id="spotlight",O.innerHTML='<div class=preloader></div>\n    <div class=scene>\n        <div class=pane></div>\n    </div>\n    <div class=header>\n        <div class=page></div>\n        <div class="icon fullscreen"></div>\n        <div class="icon autofit"></div>\n        <div class="icon zoom-out"></div>\n        <div class="icon zoom-in"> </div>\n        <div class="icon theme"></div>\n        <div class="icon player"></div>\n        <div class="icon close"></div>\n    </div>\n    <div class=progress></div>\n    <div class="arrow arrow-left"></div>\n    <div class="arrow arrow-right"></div>\n    <div class=footer>\n        <div class=title></div>\n        <div class=description></div>\n    </div>',k(O,
"transition","none"),document.body.appendChild(O),va=V("scene"),wa=V("footer"),xa=V("title"),ya=V("description"),za=V("arrow-left"),Ba=V("arrow-right"),P=V("fullscreen"),Ca=V("page"),Da=V("player"),Ea=V("progress"),Q=V("preloader"),T=document.documentElement||document.body,document.cancelFullScreen||(document.cancelFullScreen=document.exitFullscreen||document.webkitCancelFullScreen||document.webkitExitFullscreen||document.mozCancelFullScreen||function(){}),T.requestFullScreen||(T.requestFullScreen=
T.webkitRequestFullScreen||T.msRequestFullScreen||T.mozRequestFullScreen||k(P,"display","none")||function(){}),Ga=[[window,"keydown",Sa],[window,"wheel",Ta],[window,"hashchange",Ua],[window,"resize",Va],[Q,"mousedown",Wa],[Q,"mouseleave",Xa],[Q,"mouseup",Xa],[Q,"mousemove",Ya],[Q,"touchstart",Wa,{passive:!1}],[Q,"touchcancel",Xa],[Q,"touchend",Xa],[Q,"touchmove",Ya,{passive:!0}],[P,"",Za],[za,"",$a],[Ba,"",W],[Da,"",ab],[V("autofit"),"",bb],[V("zoom-in"),"",cb],[V("zoom-out"),"",db],[V("close"),"",
eb],[V("theme"),"",Na]],Ra=!0)}function Va(){u=O.clientWidth;v=O.clientHeight;N&&(y=N.width,z=N.height,fb())}function fb(){k(N,"transform","translate(-50%, -50%) scale("+A+")")}function X(a,b){k(K,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}function Ia(a,b){(a?m:k)(va,"transform","translateX("+(100*-(G-1)+(b||0))+"%)")}function gb(a){for(var b=0;b<Ga.length;b++){var c=Ga[b];(a?la:na)(c[0],c[1],c[2],c[3])}}
function Pa(a){var b=hb.call(a.target,".spotlight");if(b){var c=hb.call(b,".spotlight-group"),d=(c||document).getElementsByClassName("spotlight");La(b.dataset,c&&c.dataset);for(c=0;c<d.length;c++)if(d[c]===b){Ha(d,c+1);break}ib();return n(a)}}function Sa(a){if(K)switch(a.keyCode){case 8:bb();break;case 27:eb();break;case 32:"false"!==I.player&&ab();break;case 37:$a();break;case 39:W();break;case 38:case 107:case 187:cb();break;case 40:case 109:case 189:db()}}
function Ta(a){K&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?db():cb())}function Ua(){K&&"#spotlight"===location.hash&&eb(!0)}function ab(a){("boolean"===typeof a?a:!R)?R||(R=setInterval(W,ua),f(Da,"on"),sa&&mb()):R&&(R=clearInterval(R),h(Da,"on"),sa&&m(Ea,"transform",""));return R}function Y(){S?clearTimeout(S):f(O,"menu");var a=I.autohide;S="false"!==a?setTimeout(function(){h(O,"menu");S=null},1*a||3E3):1}function nb(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),h(O,"menu")):Y();return n(a)}
function Wa(a){B=!0;C=!1;var b=ob(a);D=y*A<=u;oa=b.x;pa=b.y;return n(a,!0)}function Xa(a){if(B&&!C)return B=!1,nb(a);D&&C&&(Ia(!0,r/u*100),r<-(v/10)&&W()||r>v/10&&$a()||Ia(),r=0,D=!1,X());B=!1;return n(a)}function Ya(a){if(B){Fa||(Fa=requestAnimationFrame(pb));var b=ob(a),c=(y*A-u)/2;C=!0;r-=oa-(oa=b.x);D?E=!0:r>c?r=c:0<u-r-y*A+c?r=u-y*A+c:E=!0;z*A>v&&(c=(z*A-v)/2,t-=pa-(pa=b.y),t>c?t=c:0<v-t-z*A+c?t=v-z*A+c:E=!0)}else Y();return n(a,!0)}
function ob(a){var b=a.touches;b&&(b=b[0]);return{x:b?b.clientX:a.pageX,y:b?b.clientY:a.pageY}}function pb(a){E?(a&&(Fa=requestAnimationFrame(pb)),X(r,t)):Fa=null;E=!1}function Za(a){("boolean"===typeof a?a:document.isFullScreen||document.webkitIsFullScreen||document.mozFullScreen)?(document.cancelFullScreen(),h(P,"on")):(T.requestFullScreen(),f(P,"on"))}
function bb(a){"boolean"===typeof a&&(F=!a);F=1===A&&!F;k(N,{maxHeight:F?"none":"",maxWidth:F?"none":"",transform:""});y=N.width;z=N.height;A=1;t=r=0;E=!0;X();Y()}function cb(a){var b=A/.65;5>=b&&qb(A=b);a||Y()}function qb(a){A=a||1;fb()}function db(a){var b=.65*A;1<=b&&(qb(A=b),t=r=0,E=!0,X());a||Y()}function ib(){location.hash="spotlight";location.hash="show";k(O,"transition","");f(T,"hide-scrollbars");f(O,"show");gb(!0);Va();Y()}
function eb(a){gb(!1);history.go(!0===a?-1:-2);h(T,"hide-scrollbars");h(O,"show");R&&ab(!1);N?N.parentNode.removeChild(N):O.querySelectorAll(".pane .video-wrapper").forEach(function(b){return b.parentNode.removeChild(b)});K=L=N=U=I=ta=null}function $a(){if(1<G)return Z(G-1);if(R||J)return Z(H)}function W(){if(G<H)return Z(G+1);if(R||J)return Z(1)}function Z(a){if(!(R&&B||a===G)){R||Y();R&&sa&&mb();var b=a>G;G=a;Ja(b);return!0}}
function mb(){m(Ea,{transitionDuration:"",transform:""});k(Ea,{transitionDuration:ua+"ms",transform:"translateX(0)"})}function Na(a){"boolean"===typeof a?qa=a:(qa=!qa,Y());qa?f(O,ra):h(O,ra)}
function Ja(a){t=r=0;A=1;var b=I.animation,c=!0,d=!0,e=!0;if(b||""===b){c=d=e=!1;b="string"===typeof b?b.split(","):b;for(var l=0;l<b.length;l++){var q=b[l].trim();if("scale"===q)c=!0;else if("fade"===q)d=!0;else if("slide"===q)e=!0;else if("flip"===q)var w=!0;else if("false"!==q){c=d=e=w=!1;var x=q;break}}}k(va,"transition",e?"":"none");Ia();K&&X();if(N){k(N,{opacity:d?0:1,transform:""});var M=N;setTimeout(function(){M&&N!==M&&M.parentNode&&M.parentNode.removeChild(M)},800)}e=Oa();x&&f(N,x);m(N,
{opacity:d?0:1,transform:"translate(-50%, -50%)"+(c?" scale(0.8)":"")+(w&&"undefined"!==typeof a?" rotateY("+(a?"":"-")+"90deg)":""),maxHeight:"",maxWidth:""});e&&k(N,{visibility:"visible",opacity:1,transform:""});x&&h(N,x);X();k(za,"visibility",J||1!==G?"":"hidden");k(Ba,"visibility",J||G!==H?"":"hidden");a=U[G-1];if(c=(c=a.title||a.description)&&"false"!==c)console.log(a.title),ka(xa,"true"==a.title?"":a.title||""),ka(ya,a.description||"");k(wa,"visibility",c?"visible":"hidden");ka(Ca,G+" / "+H);
ta&&ta(G)}var hb=Element.prototype.closest||function(a){var b=this;for(a=a.substring(1);b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement||b.parentNode}};window.Spotlight={init:Qa,theme:Na,fullscreen:Za,autofit:bb,next:W,prev:$a,"goto":Z,close:eb,zoom:qb,menu:nb,show:function(a,b){setTimeout(function(){a?(b?La(b):b={},Ha(a,b.index)):I={};ib()})},play:ab};}).call(this);
